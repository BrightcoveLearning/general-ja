---
title: 'JavaScript の約束を使う'
parent: Developers
---
<article class="bcls-article">
  <h1>コンセプト：JavaScript の約束を使用する</h1>
  <summary>このトピックでは、一部の Brightcove Player メソッドによって返される JavaScript プロミスの使用方法を学習します。</summary>
  <section class="bcls-section">
    <h2 id="section-name2">シンプルな約束</h2>
    <!-- <aside class="bcls-aside bcls-aside--information">Note: <strong translate="No">Promises</strong> do not work in IE11. Use the polyfill of the <a translate="No" href="https://www.npmjs.com/package/es6-promise">ES6-Promise</a> to add this functionality to IE11.</aside> -->
    <p>JavaScript の書き方を教えるのはこの文書の目的ではありませんが<code translate="No">Promise</code>、それらを使用する方法を理解するには、簡単な方法を確認することが有益です。<code translate="No">Promise</code>がコード化されている。</p>
    <p>以下では、<code translate="No">Promise</code>タスクが完了したかどうかを示す文字列を返すが作成されます。重要な点は、<code translate="No">Promise.resolve()</code><code translate="No">Promise.reject()</code>またはメソッドが呼び出されていることです。この場合、単純な文字列は両方のメソッドによって渡されますが、これはオブジェクトである可能性があります。</p>
    <aside class="bcls-aside bcls-aside--information">注:この簡単な例では示されていませんが、<code translate="No">Promise</code>オブジェクトはを表します<strong>最終的な完成</strong>（または失敗）の<strong>非同期操作</strong>、およびその結果の値。このように、a <code translate="No">Promise</code>はコールバック関数と概念的に似ています。</aside>
    <pre class="line-numbers">
          <code class="language-javascript" translate="No">let promiseToFinishTask = new Promise(function(resolve, reject) {
          
            //Business logic to set taskComplete boolean
            let taskComplete = true;
          
            if (taskComplete) {
              resolve('Yea, I am done');
            } else {
              reject('Not quite done');
            }
          });</code></pre>
    <p>ここで、<code translate="No">Promise</code>返された情報の処理方法について説明します。これは、Brightcove Player API メソッド呼び出しで何回か行うことになります。基本的な処理は次のとおりです。</p>
    次のようになります。
    <pre class="line-numbers">
          <code class="language-javascript" translate="No">promiseName.then(
            // Function call for promise resolved
          ).catch(
            // Function call for promise rejected
          )</code></pre>
    <p>上記の簡単な例を処理すると、ここに示すように表示されます。</p>
    <pre class="line-numbers">
          <code class="language-javascript" translate="No">promiseToFinishTask.then(function(fromResolve) {
            console.log(fromResolve);
          }).catch(function(fromReject) {
            console.log(fromReject);
          });</code></pre>
    <p><code translate="No">Promise</code><code translate="No">then</code>が解決された場合はコードが実行され、<code translate="No">Promise</code>が拒否されると、<code translate="No">catch</code>コードが実行されます。この例では、文字列の 1 つが<strong translate="No"> Yea, I done</strong> or <strong translate="No"> Net quetle done</strong> , Net quetle done という文字列は、<code translate="No">taskComplete</code>変数の値。</p>
  </section>
  <section class="bcls-section">
    <h2 id="section-name3">Brightcoveの例</h2>
    <p>Brightcove Player <code translate="No">play()</code>のメソッドは Promise を返すことがあり、これを使用して、プレーヤーが現在プレイヤーにいるビデオを自動再生できるかどうかを確認することができます。<code translate="No">Promise</code>を扱うコードが強調表示されます。</p>
    <pre class="line-numbers">
          <code class="language-javascript" translate="No">var myPlayer = videojs.getPlayer('myPlayerID');
          myPlayer.on('loadedmetadata',function() {
            var promise = myPlayer.play();
            if (promise !== undefined) {
              <span class="bcls-highlight">promise.then(function() {
                // Autoplay started!
              }).catch(function(error) {
                // Autoplay was prevented.
              });</span>
            }
          });</code></pre>
    <p>これに基づいて、ビデオが自動再生されるかどうかでビヘイビアーをコーディングできます。ビデオを再生する特定の使用例については、可能な場合はオーディオを使用して、を参照してください。<a href="https://player.support.brightcove.com/playback/autoplay-considerations.html#Specific_use_case">特定のユースケース</a>のセクション<strong>自動再生に関する考慮事項</strong>資料。</p>
    <p>JavaScript プロミスの詳細については、<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"> MDN</a>プロミスのドキュメントを参照してください。</p>
  </section>
  <section class="bcls-section">
    <h2 id="Promise_versus_callback"><code translate="No">Promise</code>対コールバック</h2>
    <p>このセクションでは、Catalog <code translate="No">get()</code>のメソッドを使用して、<code translate="No">Promise</code>コールバック関数を使用する場合の構文の違いを示します。<code translate="No">get()</code>この方法は、どちらの方法でも使用できます。</p>
    <h3>約束の構文</h3>
    <p>以下は、<code translate="No">get()</code>メソッドの呼び出しを示すコードのスニペットで、レスポンスをとして処理します<code translate="No">Promise</code>。</p>
    <pre class="line-numbers">
          <code class="language-javascript" translate="No">myPlayer.catalog.get(catalogParams).then(function(videosReturned){
            console.log('videosReturned',videosReturned);
            myPlayer.playlist(videosReturned);
          }).catch(function(errorObj){
            console.log('errorObj',errorObj);
          })</code></pre>
    <h3>コールバック関数の構文</h3>
    <p>以下は、コールバック関数でレスポンスを処理する、<code translate="No">get()</code>メソッドの呼び出しを示すコードのスニペットです。</p>
    <pre class="line-numbers">
            <code class="language-javascript" translate="No">myPlayer.catalog.get(catalogParams,function(errorObj,videosReturned){
            console.log('errorObj',errorObj);
            console.log('videosReturned',videosReturned);
            myPlayer.playlist(videosReturned);
          });
          </code></pre>
  </section>
</article>